# Pytest configuration for Dysruption CVA
# Updated: 2025-12-16 with comprehensive timeout strategy

[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
pythonpath = ..

# Timeout strategy:
# - Default: 30s (covers FAST + MEDIUM tests)
# - Individual slow tests override via @pytest.mark.timeout(60) or conftest
# - --timeout-method=thread: works on Windows
# - --tb=short: show short tracebacks on failure for debugging
# - -x: stop on first failure to avoid cascading timeouts
# Note: timeout requires pytest-timeout package
addopts = -q --tb=short --continue-on-collection-errors

# Markers for test categorization
markers =
    fast: marks tests as fast (< 1s expected, 10s timeout)
    medium: marks tests as medium (1-5s expected, 30s timeout)
    slow: marks tests as slow (5-30s expected, 60s timeout)
    integration: marks tests requiring TestClient/database

filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
asyncio_mode = auto
